<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="adminMng">
	<select id="selectEmpAuthSearch" parameterType="hashmap" resultType="hashmap">
    	<![CDATA[
    		SELECT 
    		 EMP_NO, EMP_NM, 
             CASE WHEN SUBSTR(SALES_AUTH_FLQ, 1, 1) = '1' THEN 'CHECKED' ELSE '' END SALES_AUTH_FLQ1, 
             CASE WHEN SUBSTR(SALES_AUTH_FLQ, 2, 1) = '1' THEN 'CHECKED' ELSE '' END SALES_AUTH_FLQ2, 
             CASE WHEN SUBSTR(SALES_AUTH_FLQ, 3, 1) = '1' THEN 'CHECKED' ELSE '' END SALES_AUTH_FLQ3, 
             CASE WHEN SUBSTR(SALES_AUTH_FLQ, 4, 1) = '1' THEN 'CHECKED' ELSE '' END SALES_AUTH_FLQ4,
             CASE WHEN SUBSTR(SALES_AUTH_FLQ, 5, 1) = '1' THEN 'CHECKED' ELSE '' END SALES_AUTH_FLQ5,
             CASE WHEN SUBSTR(FINFO_AUTH_FLG, 1, 1) = '1' THEN 'CHECKED' ELSE '' END FINFO_AUTH_FLG1, 
             CASE WHEN SUBSTR(FINFO_AUTH_FLG, 2, 1) = '1' THEN 'CHECKED' ELSE '' END FINFO_AUTH_FLG2, 
             CASE WHEN SUBSTR(FINFO_AUTH_FLG, 3, 1) = '1' THEN 'CHECKED' ELSE '' END FINFO_AUTH_FLG3, 
             CASE WHEN SUBSTR(FINFO_AUTH_FLG, 4, 1) = '1' THEN 'CHECKED' ELSE '' END FINFO_AUTH_FLG4,
             CASE WHEN SUBSTR(PAY_AUTH_FLG, 1, 1) = '1' THEN 'CHECKED' ELSE '' END PAY_AUTH_FLG1,
             CASE WHEN SUBSTR(PAY_AUTH_FLG, 2, 1) = '1' THEN 'CHECKED' ELSE '' END PAY_AUTH_FLG2,
             CASE WHEN SUBSTR(PAY_AUTH_FLG, 3, 1) = '1' THEN 'CHECKED' ELSE '' END PAY_AUTH_FLG3,
             CASE WHEN SUBSTR(PAY_AUTH_FLG, 4, 1) = '1' THEN 'CHECKED' ELSE '' END PAY_AUTH_FLG4,
             CASE WHEN SUBSTR(PAY_AUTH_FLG, 5, 1) = '1' THEN 'CHECKED' ELSE '' END PAY_AUTH_FLG5,
             CASE WHEN SUBSTR(SETT_AUTH_FLG, 1, 1) = '1' THEN 'CHECKED' ELSE '' END SETT_AUTH_FLG1, 
             CASE WHEN SUBSTR(SETT_AUTH_FLG, 2, 1) = '1' THEN 'CHECKED' ELSE '' END SETT_AUTH_FLG2, 
             CASE WHEN SUBSTR(SETT_AUTH_FLG, 3, 1) = '1' THEN 'CHECKED' ELSE '' END SETT_AUTH_FLG3, 
             CASE WHEN SUBSTR(SETT_AUTH_FLG, 4, 1) = '1' THEN 'CHECKED' ELSE '' END SETT_AUTH_FLG4, 
             CASE WHEN SUBSTR(SETT_AUTH_FLG, 5, 1) = '1' THEN 'CHECKED' ELSE '' END SETT_AUTH_FLG5,
             CASE WHEN SUBSTR(SETT_AUTH_FLG, 6, 1) = '1' THEN 'CHECKED' ELSE '' END SETT_AUTH_FLG6, 
             CASE WHEN SUBSTR(SETT_AUTH_FLG, 7, 1) = '1' THEN 'CHECKED' ELSE '' END SETT_AUTH_FLG7,
    		 CASE WHEN SUBSTR(RM_AUTH_FLG, 1, 1) = '1' THEN 'CHECKED' ELSE '' END RM_AUTH_FLG1, 
             CASE WHEN SUBSTR(OP_AUTH_FLG, 1, 1) = '1' THEN 'CHECKED' ELSE '' END OP_AUTH_FLG1, 
             CASE WHEN SUBSTR(OP_AUTH_FLG, 2, 1) = '1' THEN 'CHECKED' ELSE '' END OP_AUTH_FLG2, 
             CASE WHEN SUBSTR(OP_AUTH_FLG, 3, 1) = '1' THEN 'CHECKED' ELSE '' END OP_AUTH_FLG3,
             CASE WHEN SUBSTR(ADMIN_AUTH_FLG, 1, 1) = '1' THEN 'CHECKED' ELSE '' END ADMIN_AUTH_FLG1, 
             CASE WHEN SUBSTR(ADMIN_AUTH_FLG, 2, 1) = '1' THEN 'CHECKED' ELSE '' END ADMIN_AUTH_FLG2, 
             CASE WHEN SUBSTR(ADMIN_AUTH_FLG, 3, 1) = '1' THEN 'CHECKED' ELSE '' END ADMIN_AUTH_FLG3
	      FROM 
	      	 TB_EMP
	      WHERE 
	      	 1=1
    	]]>
    	<if test="contManager != null and contManager != '' ">
    		<![CDATA[
    			AND EMP_NM = #{contManager}
    		]]>
    	</if>
    	<if test="empNo != null and empNo != '' ">
    		<![CDATA[
    			AND EMP_NO = #{empNo}
    		]]>
    	</if>
	</select>
   	<select id="selectSessionIDInfo" parameterType="hashmap" resultType="hashmap">
    <![CDATA[
    	SELECT EMP_NO, EMP_NM, DEPT_CD, PART_CD,
             (SELECT DESC1 FROM TB_CODE WHERE COL_NM='POSITION_CD' AND POSITION_CD=POSITION_CD) AS POSITION,
             DUTY_CD, APP_AUTH_TYPE, APP_SEQ,
             SUBSTR(SALES_AUTH_FLQ, 1, 1) SALES_AUTH_FLQ1, SUBSTR(SALES_AUTH_FLQ, 2, 1) SALES_AUTH_FLQ2, SUBSTR(SALES_AUTH_FLQ, 3, 1) SALES_AUTH_FLQ3, 
             SUBSTR(SALES_AUTH_FLQ, 4, 1) SALES_AUTH_FLQ4, SUBSTR(SALES_AUTH_FLQ, 5, 1) SALES_AUTH_FLQ5,
             SUBSTR(FINFO_AUTH_FLG, 1, 1) FINFO_AUTH_FLG1, SUBSTR(FINFO_AUTH_FLG, 2, 1) FINFO_AUTH_FLG2, SUBSTR(FINFO_AUTH_FLG, 3, 1) FINFO_AUTH_FLG3, SUBSTR(FINFO_AUTH_FLG, 4, 1) FINFO_AUTH_FLG4,
             SUBSTR(PAY_AUTH_FLG, 1, 1) PAY_AUTH_FLG1, SUBSTR(PAY_AUTH_FLG, 2, 1) PAY_AUTH_FLG2, SUBSTR(PAY_AUTH_FLG, 3, 1) PAY_AUTH_FLG3, SUBSTR(PAY_AUTH_FLG, 4, 1) PAY_AUTH_FLG4, SUBSTR(PAY_AUTH_FLG, 5, 1) PAY_AUTH_FLG5,
             SUBSTR(SETT_AUTH_FLG, 1, 1) SETT_AUTH_FLG1, SUBSTR(SETT_AUTH_FLG, 2, 1) SETT_AUTH_FLG2, SUBSTR(SETT_AUTH_FLG, 3, 1) SETT_AUTH_FLG3, SUBSTR(SETT_AUTH_FLG, 4, 1) SETT_AUTH_FLG4, 
             SUBSTR(SETT_AUTH_FLG, 5, 1) SETT_AUTH_FLG5, SUBSTR(SETT_AUTH_FLG, 6, 1) SETT_AUTH_FLG6, SUBSTR(SETT_AUTH_FLG, 7, 1) SETT_AUTH_FLG7,
             SUBSTR(RM_AUTH_FLG, 1, 1) RM_AUTH_FLG1, 
             SUBSTR(OP_AUTH_FLG, 1, 1) OP_AUTH_FLG1, SUBSTR(OP_AUTH_FLG, 2, 1) OP_AUTH_FLG2, SUBSTR(OP_AUTH_FLG, 3, 1) OP_AUTH_FLG3, 
             SUBSTR(ADMIN_AUTH_FLG, 1, 1) ADMIN_AUTH_FLG1, SUBSTR(ADMIN_AUTH_FLG, 2, 1) ADMIN_AUTH_FLG2, SUBSTR(ADMIN_AUTH_FLG, 3, 1) ADMIN_AUTH_FLG3
     	 FROM TB_EMP
     	 WHERE EMP_NO = #{empNo}
     	 AND ST_TYPE = '0'
    ]]>
    </select>
</mapper>